<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>حالة الدفع</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f8f9fa; display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; }
        .card { box-shadow: 0 4px 8px rgba(0,0,0,0.1); border: none; border-radius: 15px; text-align: center; padding: 40px; max-width: 500px; width: 90%; }
        .icon-box { font-size: 80px; margin-bottom: 20px; }
        .success { color: #28a745; }
        .error { color: #dc3545; }
        .details { background: #f1f1f1; padding: 15px; border-radius: 10px; margin-top: 20px; text-align: right; }
        .btn-home { background-color: #0d6efd; color: white; margin-top: 20px; border-radius: 25px; padding: 10px 30px; }
    </style>
</head>
<body>

    <div class="card">
        <div id="statusIcon" class="icon-box">⏳</div>
        <h2 id="statusTitle">جاري التحقق...</h2>
        <p id="statusMessage">يرجى الانتظار لحظة</p>

        <div id="receipt" class="details" style="display: none;">
            <p><strong>رقم الطلب:</strong> <span id="orderId">---</span></p>
            <p><strong>رقم العملية:</strong> <span id="paymentId">---</span></p>
            <p><strong>الحالة:</strong> <span id="statusText">---</span></p>
        </div>

        <a href="index.html" class="btn btn-home">العودة للرئيسية</a>
    </div>

    <script>
        // دالة لجلب البيانات من الرابط
        function getQueryParams() {
            const params = new URLSearchParams(window.location.search);
            return {
                status: params.get('status'),
                payment_id: params.get('payment_id'),
                order_id: params.get('order_id')
            };
        }

        const data = getQueryParams();

        const icon = document.getElementById('statusIcon');
        const title = document.getElementById('statusTitle');
        const message = document.getElementById('statusMessage');
        const receipt = document.getElementById('receipt');

        if (data.status === 'succeeded' || data.status === 'success') {
            // حالة النجاح
            icon.innerHTML = '✅';
            icon.className = 'icon-box success';
            title.innerText = 'تم الدفع بنجاح!';
            message.innerText = 'شكراً لك، تم استلام المبلغ وتأكيد العملية.';
            
            // عرض التفاصيل
            document.getElementById('orderId').innerText = data.order_id || 'غير متوفر';
            document.getElementById('paymentId').innerText = data.payment_id || 'غير متوفر';
            document.getElementById('statusText').innerText = 'مدفوع';
            document.getElementById('statusText').style.color = 'green';
            receipt.style.display = 'block';

        } else {
            // حالة الفشل
            icon.innerHTML = '❌';
            icon.className = 'icon-box error';
            title.innerText = 'فشلت العملية';
            message.innerText = 'للأسف، لم تكتمل عملية الدفع. يرجى المحاولة مرة أخرى.';
        }
    </script>
</body>
</html>